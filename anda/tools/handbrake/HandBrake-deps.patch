diff --git a/gtk/meson.build b/gtk/meson.build
index 83233cea2..96ba52384 100644
--- a/gtk/meson.build
+++ b/gtk/meson.build
@@ -63,6 +63,8 @@ endif
 
 if get_option('qsv').enabled()
   ghb_deps += dependency('vpl')
+  ghb_deps += dependency('libva')
+  ghb_deps += dependency('libva-drm')
 endif
 
 if get_option('x265').enabled()
diff --git a/libhb/rpu.c b/libhb/rpu.c
index 28083184a..87304abc2 100644
--- a/libhb/rpu.c
+++ b/libhb/rpu.c
@@ -11,7 +11,7 @@
 #include "handbrake/rpu.h"
 
 #if HB_PROJECT_FEATURE_LIBDOVI
-#include "libdovi/rpu_parser.h"
+#include <libdovi/rpu_parser.h>
 #endif
 
 struct hb_filter_private_s
diff --git a/make/configure.py b/make/configure.py
index a383cb363..84a66307b 100644
--- a/make/configure.py
+++ b/make/configure.py
@@ -1684,8 +1684,8 @@ try:
         lipo       = ToolProbe( 'LIPO.exe',       'lipo',       'lipo', abort=False )
         pkgconfig  = ToolProbe( 'PKGCONFIG.exe',  'pkgconfig',  'pkg-config', abort=True, minversion=[0,27,0] )
         meson      = ToolProbe( 'MESON.exe',      'meson',      'meson', abort=True, minversion=[0,51,0] )
-        nasm       = ToolProbe( 'NASM.exe',       'asm',        'nasm', abort=True, minversion=[2,13,0] )
-        ninja      = ToolProbe( 'NINJA.exe',      'ninja',      'ninja-build', 'ninja', abort=True )
+        nasm       = ToolProbe( 'NASM.exe',       'asm',        'nasm', abort=False, minversion=[2,13,0] )
+        ninja      = ToolProbe( 'NINJA.exe',      'ninja',      'ninja-build', 'ninja', abort=False )
         cargo      = ToolProbe( 'CARGO.exe',      'cargo',        'cargo', abort=False )
         cargoc     = ToolProbe( 'CARGO-C.exe',    'cargo-cbuild', 'cargo-cbuild', abort=False )
 
@@ -1786,7 +1786,7 @@ try:
     ## Additional library and tool checks
     #####################################
     # Requires oneVPL which requires CMake 3.16.3 or later
-    Tools.cmake = ToolProbe('CMAKE.exe', 'cmake', 'cmake', abort=True, minversion=[3,16,3])
+    Tools.cmake = ToolProbe('CMAKE.exe', 'cmake', 'cmake', abort=False, minversion=[3,16,3])
     Tools.cmake.__init__( Tools.cmake.var, Tools.cmake.option, Tools.cmake.name, **Tools.cmake.kwargs )
     Tools.cmake.run()
     for action in Action.actions:
diff --git a/test/module.defs b/test/module.defs
index 9f803c457..3316431ce 100644
--- a/test/module.defs
+++ b/test/module.defs
@@ -21,6 +21,13 @@ TEST.pkgconfig_libs = libass libavformat libavfilter libavcodec libavutil libswr
 	jansson libturbojpeg SvtAv1Enc
 
 TEST.pkgconfig_libs += $(foreach m,$(MODULES.NAMES),$($m.OSL.libs))
+ifeq (1,$(FEATURE.qsv))
+    TEST.pkgconfig_libs += libva libva-drm vpl
+endif
+
+ifeq (1,$(FEATURE.x265))
+    TEST.pkgconfig_libs += x265
+endif
 
 ifeq (1,$(FEATURE.flatpak))
     TEST.pkgconfig_libs += glib-2.0
